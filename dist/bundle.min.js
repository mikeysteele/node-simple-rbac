!function e(r,t,o){function i(s,c){if(!t[s]){if(!r[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(n)return n(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=t[s]={exports:{}};r[s][0].call(a.exports,function(e){var t=r[s][1][e];return i(t||e)},a,a.exports,e,r,t,o)}return t[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,r,t){var o=e("./lib/Rbac.js").Rbac;"undefined"!=typeof window&&(window.Rbac=o),r.exports=o},{"./lib/Rbac.js":2}],2:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function r(e){this.config=e,this.guards=e.guards||{},this.assertions=e.assertions||{},this.provider=this._resolveProvider(e.provider)}return r.prototype.IsGranted=function(e,r,t){var o=this;return o.provider.getPermissions(e).then(function(i){return i.indexOf(r)>-1&&(!t||o._assert(e,r,t).then(function(e){return e},function(e){return Promise.reject({error:"Assertion Failed to complete",detail:e})}))}).catch(function(e){return Promise.reject({error:"Provider failed to get permissions",detail:e,provider:o.config.provider.type})})},r.prototype._resolveProvider=function(e){e.type=e.type||"InMemoryProvider";var r=e.type;if(!r)throw new Error("no provider available");if("object"==typeof r&&null!==r){if(r.getPermissions instanceof Function==!1)throw new Error("Provider object must have getPermissions()");return r.setConfig instanceof Function&&r.setConfig(e),r}var t=this._getProviders()[r];return t.setConfig instanceof Function&&t.setConfig(e),t},r.prototype._assert=function(e,r,t){var o=this.assertions[r];return o?"function"==typeof o?o(this,e,t):Promise.reject("Assertion was not callable"):Promise.reject(!0)},r.prototype._getProviders=function(){return this.providers||(this.providers={},this.providers.ObjectProvider=e("./provider/ObjectProvider.js"),this.providers.InMemoryProvider=e("./provider/InMemoryProvider.js")),this.providers},r}();t.Rbac=o},{"./provider/InMemoryProvider.js":3,"./provider/ObjectProvider.js":4}],3:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.setConfig=function(e){this._roles=e.roles},e.prototype.getPermissions=function(e){var r=this,t=e.role;return new Promise(function(e,o){r._roles?t?"string"!=typeof t?o("role needs to be a string"):e(r._roles[t]):o("no role passed"):o("roles not set")})},e}();t.InMemoryProvider=o},{}],4:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype._flatternPermissions=function(e){return e.map(function(e){return"string"==typeof e?e:e[this._permissionName]})},e.prototype.setConfig=function(e){this._roleKey=e.roleKey,this._permissionKey=e.permissionKey,this._permissionName=e.permissionName},e.prototype.getPermissions=function(e){var r=this,t=[];return new Promise(function(o,i){try{(e[r._roleKey]instanceof Array==!1?[e[r._roleKey]]:e[r._roleKey]).forEach(function(e){e[r._permissionKey]instanceof Array&&(t=r._flatternPermissions(e[r._permissionKey]))}),e[r._permissionKey]instanceof Array&&(t=t.concat(r._flatternPermissions(e[r._permissionKey]))),o(t)}catch(e){i(e)}})},e}();t.ObjectProvider=o},{}]},{},[1]);